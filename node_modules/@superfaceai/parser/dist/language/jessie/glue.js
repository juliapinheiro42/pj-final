"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.validateAndTranspile = void 0;
var transpiler_1 = require("./transpiler/transpiler");
var validator_1 = require("./validator/validator");
/**
 * Validates and transpiles Jessie script.
 *
 * This functions combines the transpiler and validator in a more efficient way
 */
function validateAndTranspile(input) {
    var _a = transpiler_1.transpileScript(input, true), output = _a.output, sourceMap = _a.sourceMap, syntaxProtoError = _a.syntaxProtoError;
    if (syntaxProtoError) {
        return { kind: 'failure', errors: [syntaxProtoError] };
    }
    var subsetErrors = validator_1.validateScript(input);
    if (subsetErrors.length > 0) {
        return { kind: 'failure', errors: subsetErrors };
    }
    return { kind: 'success', output: output, sourceMap: sourceMap };
}
exports.validateAndTranspile = validateAndTranspile;
//# sourceMappingURL=glue.js.map